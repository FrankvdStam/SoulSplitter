using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using SoulMemory.EldenRing;

namespace cli
{
    internal class EventFlagDiscovery
    {
        private EldenRing _eldenRing;
        public EventFlagDiscovery(EldenRing eldenRing)
        {
            _eldenRing = eldenRing;
            
            var knownBosses = Enum.GetValues(typeof(Boss)).Cast<uint>().ToList();
            
            foreach (var b in knownBosses)
            {
                _flags.Remove(b);
            }
            
            foreach (var f in _flags)
            {
                var val = _eldenRing.ReadEventFlag(f);
                if (val)
                {
                    Console.WriteLine($"event flag {f} enabled during init");
                }
                _dictionary[f] = val;
            }
        }

        public void Update()
        {
            foreach (var f in _flags)
            {
                var previous = _dictionary[f];
                var current = _eldenRing.ReadEventFlag(f);
                _dictionary[f] = current;

                if (previous != current)
                {
                    Console.WriteLine($"flag {f} went from {previous} to {current}");
                }
            }
        }



        private Dictionary<uint, bool> _dictionary = new Dictionary<uint, bool>();

        private List<uint> _flags = new List<uint>()
        {
            //Supposedly bosses
            10000800,
            10000850,
            10010800,
            11000800,
            11000850,
            11050800,
            11050850,
            12010800,
            12010850,
            12020800,
            12020830,
            12020850,
            12030390,
            12030800,
            12030850,
            12040800,
            12050800,
            12080800,
            12090800,
            13000800,
            13000830,
            13000850,
            14000800,
            14000850,
            15000800,
            15000850,
            16000800,
            16000850,
            16000860,
            18000800,
            18000850,
            19000800,
            35000800,
            35000850,
            39200800,
            30000800,
            30010800,
            30020800,
            30110800,
            30040800,
            30050800,
            30050850,
            30030800,
            30060800,
            30080800,
            30090800,
            30100800,
            30100801,
            30120800,
            30120801,
            30070800,
            30130800,
            30140800,
            30150800,
            30160800,
            30170800,
            30180800,
            30190800,
            30200800,
            31000800,
            31010800,
            31020800,
            31030800,
            31150800,
            31170800,
            31040800,
            31050800,
            31060800,
            31070800,
            31090800,
            31180800,
            31190800,
            31210800,
            31100800,
            31200800,
            31110800,
            31120800,
            31220800,
            32000800,
            32010800,
            32020800,
            32040800,
            34120800,
            32050800,
            32050801,
            32070800,
            32080800,
            32110800,
            34130800,
            34140850,
            1044360800,
            1043370340,
            1042380800,
            1042380850,
            1042330800,
            1044350800,
            1042370800,
            1043330800,
            1044320342,
            1044320340,
            1043300800,
            1042360800,
            1043360800,
            1045390800,
            1034480800,
            1038410800,
            1033450800,
            1036500800,
            1033420800,
            1033430800,
            1038480800,
            1035500800,
            1037460800,
            1039430340,
            1036480340,
            1037420340,
            1036450340,
            1034450800,
            1034500800,
            1034420800,
            1035420800,
            1039440800,
            1037510800,
            1041520800,
            1038510800,
            1041500800,
            1040530800,
            1041510800,
            1042550800,
            1040520800,
            1045520800,
            1039500800,
            1041530800,
            1039510800,
            1044530800,
            1043530800,
            1037530800,
            1035530800,
            1036540800,
            1039540800,
            1037540810,
            1038520340,
            1047400800,
            1048370800,
            1048400800,
            1049370800,
            1049370850,
            1049380800,
            1051360800,
            1052380800,
            1049390800,
            1048410800,
            1049390850,
            1051400800,
            1052410800,
            1052410850,
            1051430800,
            1048510800,
            1049520800,
            1054560800,
            1053560800,
            1052520800,
            1052560800,
            1050570800,
            1050570850,
            1051570800,
            1050560800,
            1248550800,
            1048570800,


            //Supposedly graces

            71000,
            71001,
            71002,
            71003,
            71004,
            71005,
            71006,
            71007,
            71008,
            71100,
            71101,
            71102,
            71103,
            71104,
            71105,
            71107,
            71108,
            71109,
            71120,
            71121,
            71122,
            71123,
            71124,
            71125,
            71190,
            71210,
            71211,
            71212,
            71213,
            71214,
            71215,
            71216,
            71218,
            71219,
            71220,
            71221,
            71222,
            71223,
            71224,
            71225,
            71226,
            71227,
            71230,
            71231,
            71232,
            71233,
            71234,
            71235,
            71240,
            71250,
            71251,
            71252,
            71253,
            71260,
            71261,
            71270,
            71271,
            71300,
            71301,
            71302,
            71303,
            71304,
            71305,
            71306,
            71307,
            71308,
            71309,
            71310,
            71400,
            71401,
            71402,
            71403,
            71500,
            71501,
            71502,
            71503,
            71504,
            71505,
            71506,
            71507,
            71508,
            71600,
            71601,
            71602,
            71603,
            71604,
            71605,
            71606,
            71607,
            71800,
            71801,
            71900,
            73000,
            73001,
            73002,
            73003,
            73004,
            73005,
            73006,
            73007,
            73008,
            73009,
            73010,
            73011,
            73012,
            73013,
            73014,
            73015,
            73016,
            73017,
            73018,
            73019,
            73020,
            73100,
            73101,
            73102,
            73103,
            73104,
            73105,
            73106,
            73107,
            73109,
            73110,
            73111,
            73112,
            73115,
            73117,
            73118,
            73119,
            73120,
            73121,
            73122,
            73200,
            73201,
            73202,
            73204,
            73205,
            73207,
            73207,
            73208,
            73211,
            73410,
            73412,
            73420,
            73421,
            73422,
            73430,
            73431,
            73432,
            73440,
            73441,
            73450,
            73451,
            73460,
            73500,
            73501,
            73502,
            73503,
            73504,
            73900,
            73901,
            73902,
            76100,
            76101,
            76102,
            76103,
            76104,
            76105,
            76106,
            76108,
            76110,
            76111,
            76113,
            76114,
            76116,
            76117,
            76118,
            76119,
            76120,
            76150,
            76151,
            76152,
            76153,
            76154,
            76155,
            76156,
            76157,
            76158,
            76159,
            76160,
            76161,
            76162,
            76200,
            76201,
            76202,
            76203,
            76204,
            76205,
            76206,
            76207,
            76208,
            76209,
            76210,
            76211,
            76212,
            76213,
            76214,
            76215,
            76216,
            76217,
            76218,
            76219,
            76220,
            76221,
            76222,
            76223,
            76224,
            76225,
            76226,
            76227,
            76228,
            76229,
            76230,
            76231,
            76232,
            76233,
            76234,
            76235,
            76236,
            76237,
            76238,
            76239,
            76240,
            76241,
            76242,
            76243,
            76244,
            76245,
            76247,
            76250,
            76251,
            76252,
            76300,
            76301,
            76302,
            76303,
            76304,
            76305,
            76306,
            76307,
            76308,
            76309,
            76310,
            76311,
            76312,
            76313,
            76314,
            76350,
            76351,
            76352,
            76353,
            76354,
            76355,
            76356,
            76357,
            76320,
            76321,
            76322,
            76400,
            76401,
            76402,
            76403,
            76404,
            76405,
            76406,
            76407,
            76409,
            76410,
            76411,
            76412,
            76413,
            76414,
            76415,
            76416,
            76417,
            76418,
            76419,
            76420,
            76422,
            76450,
            76451,
            76452,
            76453,
            76454,
            76455,
            76456,
            76500,
            76501,
            76502,
            76503,
            76504,
            76505,
            76506,
            76507,
            76508,
            76509,
            76510,
            76520,
            76521,
            76522,
            76523,
            76524,
            76550,
            76551,
            76652,
            76653,


        };
    }
}
