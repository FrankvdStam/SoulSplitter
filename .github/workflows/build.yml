name: build
on:  push
jobs:
  build:
    name: Build
    runs-on: windows-2019
    steps:
      - name: Checkout
        uses: actions/checkout@v2.4.0
        with:
          fetch-depth: 0
        
        
      - uses: actions/checkout@master
      - id: component
        uses: actions-rs/components-nightly@v1
      - uses: actions-rs/toolchain@v1
        with:
            toolchain: ${{ steps.component.outputs.toolchain }}
            override: true
        
      - name: run cargo build
        run: cargo build --verbose
        
      - name: setup-msbuild
        uses: microsoft/setup-msbuild@v1.1
        
      - name: run msbuild
        run: msbuild SoulSplitter.sln -t:rebuild -property:Configuration=Debug /p:OutputPath=build
        
      - name: run NUnit tests
        shell: powershell
        run: packages\NUnit.ConsoleRunner.3.15.0\tools\nunit3-console.exe tests\SoulSplitter.Tests\build\SoulSplitter.Tests.dll
