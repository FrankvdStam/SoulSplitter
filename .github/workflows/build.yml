name: build
on:  push
jobs:
  build:
    name: Build
    runs-on: windows-2019
    steps:
    
      - name: Checkout
        uses: actions/checkout@v2.4.0
        with:
          fetch-depth: 0
          
      - name: setup dotnet
        uses: actions/setup-dotnet@v3

      - name: dotnet restore
        run: dotnet restore

      - name: setup-msbuild
        uses: microsoft/setup-msbuild@v1.1
        
      - name: run msbuild
        run: msbuild SoulSplitter.sln -t:rebuild -property:Configuration=Debug /p:OutputPath=build

      - name: run NUnit tests
        shell: powershell
        run: packages\NUnit.ConsoleRunner.3.15.0\tools\nunit3-console.exe tests\SoulSplitter.Tests\build\SoulSplitter.Tests.dll  tests\SoulMemory.Tests\build\SoulMemory.Tests.dll
